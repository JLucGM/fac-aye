import{r as c,j as e,L as j,$ as l}from"./app-C2t6tiOn.js";import{H as g}from"./heading-DS7dQFxB.js";import{C}from"./content-layout-o6FIEw0t.js";import{I as v}from"./input-IMzyEmvq.js";import{b as d}from"./button-hcTqeTF3.js";import{D as P}from"./data-table-D00fksAE.js";import{P as y}from"./patients-info-Bz_7cszH.js";import{E as N}from"./eye-_oCsAxdj.js";import"./createLucideIcon-_S87D8x2.js";import"./app-logo-icon-DWUGaNNl.js";import"./index-BsOvDiK_.js";import"./utils-bRKmu4jq.js";import"./index-Deq7QSNi.js";import"./Combination-Dn-Wcu0z.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-BOJCiT0t.js";import"./index-dkW4UkYo.js";import"./table-B8UwjDvQ.js";const b=[{title:"Inicio",href:"/dashboard"},{title:"Búsqueda rápida paciente",href:"/module-operation.profile_patient_index"}];function k({patients:u}){const[n,m]=c.useState(""),[t,p]=c.useState(null),h=s=>{const a=s.target.value;m(a);const i=u.find(o=>o.name.toLowerCase().includes(a.toLowerCase())||o.email.toLowerCase().includes(a.toLowerCase())||o.identification.includes(a));p(i||null)},r=s=>{const a=s.length,i=s.filter(x=>x.payment_status==="pagado").length,o=a-i;return{totalConsultations:a,paidConsultations:i,pendingConsultations:o}},f=[{accessorKey:"scheduled_at",header:"Fecha Programada",cell:({row:s})=>new Date(s.original.scheduled_at).toLocaleString()},{accessorKey:"status",header:"Estado"},{accessorKey:"payment_status",header:"Estado de Pago"},{accessorKey:"amount",header:"Monto"},{id:"actions",cell:({row:s})=>e.jsx(l,{className:d({variant:"ghost"})+" w-full",href:route("consultations.edit",[s.original.id]),children:"Editar"})}];return e.jsxs(C,{breadcrumbs:b,children:[e.jsx(j,{title:"Búsqueda rápida paciente"}),e.jsx(g,{title:"Búsqueda rápida paciente",description:"Aquí puedes buscar un paciente por nombre, correo o identificación y ver sus asistencias."}),e.jsx(v,{type:"text",placeholder:"Buscar por nombre, correo o identificación...",value:n,onChange:h}),t?e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(l,{className:d({variant:"outline"})+" w-auto",href:route("patients.show",[t.slug??t.id]),children:[e.jsx(N,{})," Perfil del paciente"]})}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"",children:e.jsx(y,{patient:t})}),e.jsx("div",{className:"mt-4",children:t.consultations&&t.consultations.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Total de asistencias: ",r(t.consultations).totalConsultations]}),e.jsxs("p",{children:["Asistencias Pagadas: ",r(t.consultations).paidConsultations]}),e.jsxs("p",{children:["Asistencias No Pagadas: ",r(t.consultations).pendingConsultations]})]})})]}),e.jsx(P,{columns:f,data:t.consultations||[]})]}):n&&e.jsx("div",{className:"mt-4",children:e.jsxs("p",{children:['No se encontraron resultados para "',n,'".']})})]})}export{k as default};
