import{m as f,j as a,L as x}from"./app-BkggyFca.js";import{B as o}from"./button-COlYU0Oc.js";import{C as _}from"./content-layout-BceNpfeC.js";import{H as h}from"./heading-ysB86RhI.js";import j from"./InvoicesForm-Dd8hj11M.js";import{t as e}from"./index-BO0TvK9b.js";import{D as b}from"./download-prbcqRAT.js";import"./index-BE4-eoKf.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-CVod7Zp8.js";import"./chevron-right-BqDD2j8Q.js";import"./createLucideIcon-DCOv_xXL.js";import"./index-BNEdfBeD.js";import"./Combination-D5ZbfFU7.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-DTy-Ez4_.js";import"./input-error-BILin8mf.js";import"./input-BmvMQ_Nn.js";import"./label-BZXRDps0.js";import"./select-B6KPxR1h.js";import"./index-BW8_AEZ4.js";import"./index-CNBs9QqH.js";import"./check-BaiHFQec.js";import"./react-select.esm-Bul3kTKX.js";const E=[{title:"Inicio",href:"/dashboard"},{title:"Listado de Facturas",href:"/invoices"},{title:"Editar Factura",href:"#"}];function O({invoice:t,patients:s,consultations:n}){const{data:u,setData:d,errors:c,put:m,processing:i}=f({patient_id:t.patient_id,invoice_date:t.invoice_date,due_date:t.due_date,notes:t.notes??"",items:t.items.map(r=>({id:r.id,consultation_id:r.consultation_id,quantity:r.quantity,unit_price:r.unit_price,line_total:r.line_total}))}),p=r=>{r.preventDefault(),m(route("invoices.update",t.id),{onSuccess:()=>{e.success("Factura actualizada con éxito.")},onError:l=>{console.error("Error al actualizar la factura:",l),e.error("Error al actualizar la factura. Revisa los campos.")}})};return a.jsxs(_,{breadcrumbs:E,children:[a.jsx(x,{title:"Editar Factura"}),a.jsx(h,{title:"Editar Factura",description:`Aquí puedes editar la factura #${t.invoice_number}.`,children:a.jsxs(o,{variant:"default",onClick:()=>window.open(route("invoices.pdf",t.id),"_blank"),children:[a.jsx(b,{className:"mr-2 h-4 w-4"}),"Descargar Factura PDF"]})}),a.jsxs("form",{className:"flex flex-col gap-4",onSubmit:p,children:[a.jsx(j,{data:u,patients:s,consultations:n,setData:d,errors:c,isEditing:!0}),a.jsx(o,{variant:"default",type:"submit",disabled:i,children:i?"Actualizando...":"Actualizar Factura"})]})]})}export{O as default};
