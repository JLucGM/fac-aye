import{m as f,j as a,L as x}from"./app-BI19IgvB.js";import{B as o}from"./button-N-vKsxDA.js";import{C as _}from"./content-layout-kI2v6P1d.js";import{H as h}from"./heading-DZ-6VKkE.js";import j from"./InvoicesForm-ccRVVO8k.js";import{t as e}from"./index-DsbJg1gJ.js";import{D as b}from"./download-Bq0KgX-0.js";import"./index-Cnh9NrWZ.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-Apax-qIO.js";import"./chevron-right-B9vH4GyZ.js";import"./createLucideIcon-iUzpHHvJ.js";import"./index-Dz4tCuRZ.js";import"./Combination-Bw_21JTV.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-CYfFHtHz.js";import"./input-error-CpdumXdR.js";import"./input-ps7vEDE0.js";import"./label-Bn6LoY71.js";import"./select-CkJ6U6Wc.js";import"./index-NOfg-_uz.js";import"./index-Bye_Dgf8.js";import"./check-C9yi405w.js";import"./react-select.esm-DzcXGEHb.js";const E=[{title:"Inicio",href:"/dashboard"},{title:"Listado de Facturas",href:"/invoices"},{title:"Editar Factura",href:"#"}];function O({invoice:t,patients:s,consultations:n}){const{data:u,setData:d,errors:c,put:m,processing:i}=f({patient_id:t.patient_id,invoice_date:t.invoice_date,due_date:t.due_date,notes:t.notes??"",items:t.items.map(r=>({id:r.id,consultation_id:r.consultation_id,quantity:r.quantity,unit_price:r.unit_price,line_total:r.line_total}))}),p=r=>{r.preventDefault(),m(route("invoices.update",t.id),{onSuccess:()=>{e.success("Factura actualizada con éxito.")},onError:l=>{console.error("Error al actualizar la factura:",l),e.error("Error al actualizar la factura. Revisa los campos.")}})};return a.jsxs(_,{breadcrumbs:E,children:[a.jsx(x,{title:"Editar Factura"}),a.jsx(h,{title:"Editar Factura",description:`Aquí puedes editar la factura #${t.invoice_number}.`,children:a.jsxs(o,{variant:"default",onClick:()=>window.open(route("invoices.pdf",t.id),"_blank"),children:[a.jsx(b,{className:"mr-2 h-4 w-4"}),"Descargar Factura PDF"]})}),a.jsxs("form",{className:"flex flex-col gap-4",onSubmit:p,children:[a.jsx(j,{data:u,patients:s,consultations:n,setData:d,errors:c,isEditing:!0}),a.jsx(o,{variant:"default",type:"submit",disabled:i,children:i?"Actualizando...":"Actualizar Factura"})]})]})}export{O as default};
