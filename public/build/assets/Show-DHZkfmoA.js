import{r as d,j as e,L as w,$ as T}from"./app-BaNFacks.js";import{D as L}from"./data-table-zPIOsuu9.js";import{H as M}from"./heading-Dryr75PN.js";import{B as x}from"./button-C2utgpyk.js";import{A as P}from"./app-layout-B6y8PlCE.js";import{C as E}from"./content-layout-ewJt28BJ.js";import{consultationColumns as I}from"./consultationColumns-GamPtZer.js";import{L as p}from"./label-BrcINEJv.js";import{I as y}from"./input-B6oBgo6B.js";import{p as O,C as _,a as $,b as A,c as H,d as z}from"./collapsible-BIPvlggC.js";import{S as B}from"./square-pen-DWwvDO0o.js";import{f as V}from"./format-IqVLw5LE.js";/* empty css            */import"./table-DuQyU_oQ.js";import"./utils-bRKmu4jq.js";import"./index-xlHgpnQO.js";import"./index-j81X5Fg9.js";import"./Combination-DUZVKsHe.js";import"./floating-ui.dom-C5vApqfE.js";import"./createLucideIcon-C5RX-QSg.js";import"./dropdown-menu-MpDP4PIp.js";import"./app-logo-icon-IWmtcpMF.js";import"./chevron-right-BYqJl8-_.js";const Y=[{title:"Dashboard",href:"/dashboard"},{title:"patients",href:"/patients"},{title:"Ver",href:"#"}],k=s=>{if(!s)return"Fecha no disponible";const a=new Date(s),n=new Date;let r=n.getFullYear()-a.getFullYear();const o=n.getMonth()-a.getMonth();return(o<0||o===0&&n.getDate()<a.getDate())&&r--,r},q=s=>s.filter(a=>a.payment_status==="pending").reduce((a,n)=>a+(typeof n.amount=="string"?parseFloat(n.amount):n.amount),0);function xe({patient:s}){const[a,n]=d.useState("all"),[r,o]=d.useState("all"),[l,u]=d.useState(""),[i,j]=d.useState(""),[f,C]=d.useState(!1),g=s.consultations||[],c=g.filter(t=>{const N=a==="all"||t.payment_status===a,F=r==="all"||t.consultation_type===r;let m=!0;if(l||i){const S=O(t.scheduled_at),h=V(S,"yyyy-MM-dd");l&&i?m=h>=l&&h<=i:l?m=h>=l:i&&(m=h<=i)}return N&&F&&m}),v=c.length,b=c.filter(t=>t.payment_status==="paid").length,D=c.filter(t=>t.payment_status==="pending").length;return e.jsxs(P,{breadcrumbs:Y,children:[e.jsx(w,{title:"Ver Paciente"}),e.jsxs(E,{children:[e.jsx(M,{title:`${s.name} ${s.lastname}`,description:"Detalles del paciente",children:e.jsx(x,{asChild:!0,children:e.jsxs(T,{className:"btn btn-primary",href:route("patients.edit",[s]),children:[e.jsx(B,{}),"Actualizar paciente"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{children:"Información del Paciente"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",s.name," ",s.lastname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Identificación:"})," ",s.identification]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",s.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha de Nacimiento:"})," ",s.birthdate?new Date(s.birthdate).toLocaleDateString("es-ES"):"Fecha no disponible"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edad:"})," ",k(s.birthdate)]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total de Consultas:"})," ",v]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Consultas Pagadas:"})," ",b]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Consultas Pendientes:"})," ",D]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total de Deuda:"})," $",q(g).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros de Consultas"}),e.jsxs(_,{open:f,onOpenChange:C,className:"w-full space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-4 px-4 bg-gray-100 p-3 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Filtros de Consulta"}),e.jsx($,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",children:f?e.jsxs(e.Fragment,{children:["Ocultar filtros",e.jsx(A,{className:"h-4 w-4 mr-2"})]}):e.jsxs(e.Fragment,{children:["Mostrar filtros",e.jsx(H,{className:"h-4 w-4 mr-2"})]})})})]}),e.jsx(z,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"paymentStatus",className:"whitespace-nowrap",children:"Estado de pago:"}),e.jsxs("select",{id:"paymentStatus",value:a,onChange:t=>n(t.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"paid",children:"Pagadas"}),e.jsx("option",{value:"pending",children:"Pendientes"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"consultationType",className:"whitespace-nowrap",children:"Tipo de consulta:"}),e.jsxs("select",{id:"consultationType",value:r,onChange:t=>o(t.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"domiciliary",children:"Domicilio"}),e.jsx("option",{value:"office",children:"Oficina"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"startDate",children:"Desde:"}),e.jsx(y,{id:"startDate",type:"date",value:l,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"endDate",children:"Hasta:"}),e.jsx(y,{id:"endDate",type:"date",value:i,onChange:t=>j(t.target.value),min:l})]}),e.jsx(x,{onClick:()=>{n("all"),o("all"),u(""),j("")},variant:"outline",children:"Limpiar filtros"})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Consultas (",c.length,")"]}),e.jsx(L,{columns:I,data:c})]})]})]})]})}export{xe as default};
