import{r as l,j as e,L as f,$ as c}from"./app-ClBIcqf8.js";import{H as g}from"./heading-DNeZpkfp.js";import{C}from"./content-layout-VtN45T4x.js";import{I as b}from"./input-BhEDF2m4.js";import{b as d}from"./button-QIBx4eB1.js";import{D as v}from"./data-table-BgOdAEwt.js";import{E as N}from"./eye-D-VZw3SA.js";import"./app-logo-icon-D_2pTsxR.js";import"./index-Ab5rnF_t.js";import"./utils-bRKmu4jq.js";import"./chevron-right-BNFDF9x3.js";import"./createLucideIcon-o9RIc1Ws.js";import"./index-BKT9Wza6.js";import"./Combination-CJmfQcDB.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-DXP5Ta08.js";import"./table-CYZOIZXe.js";const P=[{title:"Inicio",href:"/dashboard"},{title:"Búsqueda rápida paciente",href:"/module-operation.profile_patient_index"}];function R({patients:u}){const[i,h]=l.useState(""),[s,m]=l.useState(null),p=t=>{const a=t.target.value;h(a);const o=u.find(n=>n.name.toLowerCase().includes(a.toLowerCase())||n.email.toLowerCase().includes(a.toLowerCase())||n.identification.includes(a));m(o||null)},r=t=>{const a=t.length,o=t.filter(j=>j.payment_status==="pagado").length,n=a-o;return{totalConsultations:a,paidConsultations:o,pendingConsultations:n}},x=[{accessorKey:"scheduled_at",header:"Fecha Programada",cell:({row:t})=>new Date(t.original.scheduled_at).toLocaleString()},{accessorKey:"status",header:"Estado"},{accessorKey:"payment_status",header:"Estado de Pago"},{accessorKey:"amount",header:"Monto"},{id:"actions",cell:({row:t})=>e.jsx(c,{className:d({variant:"ghost"})+" w-full",href:route("consultations.edit",[t.original.id]),children:"Editar"})}];return e.jsxs(C,{breadcrumbs:P,children:[e.jsx(f,{title:"Perfil del Paciente"}),e.jsx(g,{title:"Búsqueda rápida paciente",description:"Aquí puedes buscar un paciente por nombre, correo o identificación y ver sus consultas."}),e.jsx(b,{type:"text",placeholder:"Buscar por nombre, correo o identificación...",value:i,onChange:p}),s?e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{children:"Información del Paciente"}),e.jsxs(c,{className:d({variant:"outline"})+" w-auto",href:route("patients.show",[s.slug??s.id]),children:[e.jsx(N,{})," Mostrar"]})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",s.name," ",s.lastname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Identificación:"})," ",s.identification]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",s.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha de Nacimiento:"})," ",s.birthdate?new Date(s.birthdate).toLocaleDateString():"Fecha no disponible"]})]}),e.jsx("div",{className:"mt-4",children:s.consultations&&s.consultations.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total de Consultas:"})," ",r(s.consultations).totalConsultations]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Consultas Pagadas:"})," ",r(s.consultations).paidConsultations]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Consultas No Pagadas:"})," ",r(s.consultations).pendingConsultations]})]})})]}),e.jsx("h3",{children:"Consultas"}),e.jsx(v,{columns:x,data:s.consultations||[]})]}):i&&e.jsx("div",{className:"mt-4",children:e.jsxs("p",{children:['No se encontraron resultados para "',i,'".']})})]})}export{R as default};
