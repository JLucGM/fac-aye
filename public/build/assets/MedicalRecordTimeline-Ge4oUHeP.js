import{r as x,j as e}from"./app-C2t6tiOn.js";import{B as c}from"./button-hcTqeTF3.js";import{D as S,b as I,c as V,d as L,e as O,f as R}from"./dialog-Drqpl30b.js";import{L as T}from"./label-DwPiOzoP.js";import{I as C}from"./input-IMzyEmvq.js";import{T as X}from"./textarea-Dj2uHQjR.js";import{b as j,a as p,c as f,d as q,f as z}from"./format-DE3CduTx.js";import{c as g}from"./createLucideIcon-_S87D8x2.js";import{E as A}from"./eye-_oCsAxdj.js";import{C as Y}from"./chevron-down-BOJCiT0t.js";import{C as $}from"./chevron-up-BcUxAqek.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Q=g("FileText",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],U=g("Info",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],_=g("Pencil",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],K=g("Shield",J);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],ae=g("Stethoscope",ee),te={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},se=(a,i,s)=>{let t;const r=te[a];return typeof r=="string"?t=r:i===1?t=r.one:t=r.other.replace("{{count}}",i.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"en "+t:"hace "+t:t},ne={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},ie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},oe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},re={date:j({formats:ne,defaultWidth:"full"}),time:j({formats:ie,defaultWidth:"full"}),dateTime:j({formats:oe,defaultWidth:"full"})},de={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},le={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},me=(a,i,s,t)=>i.getHours()!==1?le[a]:de[a],ce={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},he={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},ue={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},pe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},fe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},xe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},ge=(a,i)=>Number(a)+"º",be={ordinalNumber:ge,era:p({values:ce,defaultWidth:"wide"}),quarter:p({values:he,defaultWidth:"wide",argumentCallback:a=>Number(a)-1}),month:p({values:ue,defaultWidth:"wide"}),day:p({values:pe,defaultWidth:"wide"}),dayPeriod:p({values:fe,defaultWidth:"wide",formattingValues:xe,defaultFormattingWidth:"wide"})},ye=/^(\d+)(º)?/i,ve=/\d+/i,je={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Me={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Ne={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},we={any:[/1/i,/2/i,/3/i,/4/i]},Pe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},De={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},ke={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Ce={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},ze={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},We={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Te={ordinalNumber:q({matchPattern:ye,parsePattern:ve,valueCallback:function(a){return parseInt(a,10)}}),era:f({matchPatterns:je,defaultMatchWidth:"wide",parsePatterns:Me,defaultParseWidth:"any"}),quarter:f({matchPatterns:Ne,defaultMatchWidth:"wide",parsePatterns:we,defaultParseWidth:"any",valueCallback:a=>a+1}),month:f({matchPatterns:Pe,defaultMatchWidth:"wide",parsePatterns:De,defaultParseWidth:"any"}),day:f({matchPatterns:ke,defaultMatchWidth:"wide",parsePatterns:Ce,defaultParseWidth:"any"}),dayPeriod:f({matchPatterns:ze,defaultMatchWidth:"any",parsePatterns:We,defaultParseWidth:"any"})},W={code:"es",formatDistance:se,formatLong:re,formatRelative:me,localize:be,match:Te,options:{weekStartsOn:1,firstWeekContainsDate:1}},_e=()=>e.jsx(Q,{className:"shrink-0 size-4 mt-1"}),Fe=()=>e.jsx(K,{className:"shrink-0 size-4 mt-1"}),He=()=>e.jsx(ae,{className:"shrink-0 size-4 mt-1"}),Ee=()=>e.jsx(U,{className:"shrink-0 size-4 mt-1"}),Qe=({medicalRecords:a,initialVisibleCount:i=3,onEdit:s})=>{const[t,r]=x.useState(null),[d,b]=x.useState(!1),[o,y]=x.useState(!1),[h,w]=x.useState({}),u=(n,l)=>{w(m=>({...m,[n]:l}))},H=a.reduce((n,l)=>{const m=z(new Date(l.created_at),"d MMM, yyyy",{locale:W});return n[m]||(n[m]=[]),n[m].push(l),n},{}),P=Object.entries(H).sort(([n],[l])=>new Date(l).getTime()-new Date(n).getTime()),E=P.slice(0,i),D=P.slice(i),k=n=>{r(n),w(n),b(!0),y(!1)},v=()=>{b(!1),y(!1)};return a!=null&&a.length?e.jsxs("div",{className:"space-y-6",children:[E.map(([n,l])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium uppercase text-gray-500 ps-2 my-2",children:n}),l.map(m=>e.jsx(F,{record:m,onEdit:s,onView:k},m.id))]},n)),D.length>0&&e.jsx(Se,{entries:D,onEdit:s,onView:k}),e.jsx(S,{open:d,onOpenChange:v,children:e.jsxs(I,{className:"sm:max-w-[700px]",children:[e.jsxs(V,{children:[e.jsx(L,{children:o?"Editar Registro Médico":"Detalles del Registro"}),e.jsx(O,{children:o?"Modifica los campos necesarios":"Información completa del registro"})]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{label:"Título",value:o?h.title:t.title,onChange:n=>u("title",n),editable:o}),e.jsx(M,{label:"Tipo",value:o?h.type:t.type,onChange:n=>u("type",n),editable:o}),e.jsx(M,{label:"Fecha",value:z(new Date(t.created_at),"PPp",{locale:W}),readOnly:!0}),e.jsx(N,{label:"Descripción",value:o?h.description:t.description??"",onChange:n=>u("description",n),editable:o}),e.jsx(N,{label:"Anamnesis",value:o?h.anamnesis:t.anamnesis??"",onChange:n=>u("anamnesis",n),editable:o}),e.jsx(N,{label:"Comportamiento del Dolor",value:o?h.pain_behavior:t.pain_behavior??"",onChange:n=>u("pain_behavior",n),editable:o})]}),e.jsx(R,{children:o?e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(c,{onClick:()=>{s&&t&&(s({...t,...h}),v())},children:"Guardar Cambios"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"outline",onClick:()=>y(!0),children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Editar"]}),e.jsx(c,{onClick:v,children:"Cerrar"})]})})]})})]}):e.jsx("p",{className:"text-gray-600 py-4",children:"No hay registros médicos disponibles."})},F=({record:a,onEdit:i,onView:s})=>e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx("div",{className:"relative last:after:hidden after:absolute after:top-7 after:bottom-0 after:start-3.5 after:w-px after:bg-gray-200",children:e.jsx("div",{className:"relative z-10 size-7 flex justify-center items-center",children:e.jsx("div",{className:"size-2 rounded-full bg-gray-400"})})}),e.jsxs("div",{className:"grow pt-0.5 pb-8",children:[e.jsxs("h3",{className:"flex gap-x-1.5 font-semibold text-gray-800",children:[a.type==="consulta"&&e.jsx(_e,{}),a.type==="diagnostico"&&e.jsx(Fe,{}),a.type==="tratamiento"&&e.jsx(He,{}),a.type==="otro"&&e.jsx(Ee,{}),a.title]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:a.description||a.anamnesis||"Sin descripción disponible"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs(c,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800",onClick:()=>s(a),children:[e.jsx(A,{className:"mr-1 size-4"})," Ver"]}),i&&e.jsxs(c,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-800",onClick:()=>i(a),children:[e.jsx(_,{className:"mr-1 size-4"})," Editar"]})]})]})]}),Se=({entries:a,onEdit:i,onView:s})=>{const[t,r]=x.useState(!0);return e.jsxs(e.Fragment,{children:[!t&&a.map(([d,b])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium uppercase text-gray-500 ps-2 my-2",children:d}),b.map(o=>e.jsx(F,{record:o,onEdit:i,onView:s},o.id))]},d)),e.jsx("div",{className:"ps-2 -ms-px",children:e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>r(!t),className:"text-blue-600 hover:underline",children:[t?e.jsx(Y,{className:"mr-1 size-4"}):e.jsx($,{className:"mr-1 size-4"}),t?"Mostrar más":"Mostrar menos"]})})]})},M=({label:a,value:i="",onChange:s,editable:t=!1,readOnly:r=!1})=>e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsxs(T,{className:"text-right",children:[a,":"]}),t&&!r?e.jsx(C,{value:i,onChange:d=>s==null?void 0:s(d.target.value),className:"col-span-3"}):e.jsx(C,{value:i,readOnly:!0,className:"col-span-3 bg-gray-100"})]}),N=({label:a,value:i="",onChange:s,editable:t=!1})=>{const r=i??"";return e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsxs(T,{className:"text-right pt-2",children:[a,":"]}),t?e.jsx(X,{value:r,onChange:d=>s==null?void 0:s(d.target.value),className:"col-span-3 min-h-20"}):e.jsx("div",{className:"col-span-3 bg-gray-100 p-2 rounded min-h-20",children:r||"No especificado"})]})};export{Qe as M};
