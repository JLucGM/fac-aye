import{m as b,j as e,L as N}from"./app-BaNFacks.js";import{A as C}from"./app-layout-B6y8PlCE.js";import{C as S}from"./content-layout-ewJt28BJ.js";import{B as l}from"./button-C2utgpyk.js";import k from"./ConsultationsForm-v7CryhQc.js";import{H as w}from"./heading-Dryr75PN.js";import{L as c}from"./label-BrcINEJv.js";import{S as D}from"./react-select.esm-DpILO6rb.js";import{I as p}from"./input-error-dAPajrZB.js";import{I}from"./input-B6oBgo6B.js";import L from"./ServicesTable-B-MF-gfi.js";import{c as E}from"./createLucideIcon-C5RX-QSg.js";/* empty css            */import"./index-xlHgpnQO.js";import"./utils-bRKmu4jq.js";import"./index-j81X5Fg9.js";import"./Combination-DUZVKsHe.js";import"./floating-ui.dom-C5vApqfE.js";import"./dropdown-menu-MpDP4PIp.js";import"./app-logo-icon-IWmtcpMF.js";import"./chevron-right-BYqJl8-_.js";import"./format-IqVLw5LE.js";import"./table-DuQyU_oQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],M=E("Download",F),P=[{title:"Dashboard",href:"/dashboard"},{title:"Consultations",href:"/consultations"},{title:"Editar Consulta",href:"#"}];function oe({consultation:a,patients:u,users:f,services:i,paymentMethods:h}){var m;console.log("Edit Consultation Page Loaded",a);const n=a.payment&&a.payment.length>0?a.payment[0]:{payment_method_id:null,reference:""},{data:r,setData:o,errors:s,put:_}=b({user_id:a.user_id,patient_id:a.patient_id,service_id:((m=a.services)==null?void 0:m.map(t=>t.id))??[],status:a.status,scheduled_at:a.scheduled_at?new Date(a.scheduled_at).toISOString().slice(0,16):"",notes:a.notes||"",payment_status:a.payment_status||"",consultation_type:a.consultation_type||"",amount:a.amount||0,payment_method_id:n.payment_method_id,reference:n.reference}),x=t=>{t.preventDefault(),_(((j,v)=>window.route(j,v))("consultations.update",a.id))},y=t=>{t.preventDefault(),window.open(route("consultationpdf",a.id),"_blank")},d=h.map(t=>({value:t.id,label:t.name})),g=i.filter(t=>r.service_id.includes(t.id));return e.jsxs(C,{breadcrumbs:P,children:[e.jsx(N,{title:"Editar Consulta"}),e.jsxs(S,{children:[e.jsx(w,{title:"Editar consulta",description:"Modifica los detalles de la consulta y la información de pago.",children:e.jsxs(l,{variant:"default",onClick:y,children:[e.jsx(M,{}),"Descargar PDF"]})}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"col-span-full md:col-span-2",children:e.jsx(k,{data:r,patients:u,users:f,services:i,setData:o,errors:s})}),e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Información de Pago"}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"payment_method_id",children:"Método de Pago"}),e.jsx(D,{id:"payment_method_id",options:d,value:d.find(t=>t.value===r.payment_method_id)||null,onChange:t=>o("payment_method_id",(t==null?void 0:t.value)||null),isSearchable:!0,placeholder:"Selecciona un método de pago...",className:"basic-single rounded-md mt-1 block w-full",classNamePrefix:"select"}),s.payment_method_id&&e.jsx(p,{message:s.payment_method_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"reference",className:"my-2 block font-semibold text-gray-700",children:"Referencia/Número de Transacción  (Opcional)"}),e.jsx(I,{id:"reference",type:"text",value:r.reference,onChange:t=>o("reference",t.target.value),placeholder:"Ingrese la referencia de pago",className:"mt-1 block w-full"}),s.reference&&e.jsx(p,{message:s.reference,className:"mt-2"})]})]})]}),e.jsx(L,{services:g}),e.jsx(l,{type:"submit",variant:"default",children:"Actualizar Consulta"})]})]})]})}export{oe as default};
