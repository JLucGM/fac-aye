import{m as f,j as r,L as x}from"./app-DIBeQtRO.js";import{B as o}from"./button-BxnpJVTr.js";import{C as _}from"./content-layout-BoNKGOrg.js";import{H as b}from"./heading-BfsDQ09q.js";import h from"./InvoicesForm-C9kF88lu.js";import{t as e}from"./index-C2ahIvdf.js";import{D as j}from"./download-QCKOEgDk.js";import"./index-BpaSFSID.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-Dgo6D4RN.js";import"./chevron-right-5fXYvw6o.js";import"./createLucideIcon-D7IjAhaZ.js";import"./index-D78Sqp67.js";import"./Combination-CF3lsYoh.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-Bga1WMLE.js";import"./input-error-D1soUCoF.js";import"./input-B8k_E8_m.js";import"./label-PGtVr5Iv.js";import"./select-ej-R4Kiv.js";import"./index-BSPMZ3Oo.js";import"./index-as5ix8vS.js";import"./check-DCUjj0Et.js";import"./react-select.esm-D3mKCo52.js";const E=[{title:"Inicio",href:"/dashboard"},{title:"Listado de Facturas",href:"/invoices"},{title:"Editar Factura",href:"#"}];function O({invoice:t,patients:s,consultations:n}){const{data:u,setData:c,errors:m,put:l,processing:i}=f({invoice_number:t.invoice_number,patient_id:t.patient_id,invoice_date:t.invoice_date,notes:t.notes??"",items:(t.items??[]).map(a=>({id:a.id,consultation_id:a.consultation_id??null,quantity:a.quantity,unit_price:a.unit_price,line_total:a.line_total}))}),p=a=>{a.preventDefault(),l(route("invoices.update",t.id),{onSuccess:()=>{e.success("Factura actualizada con éxito.")},onError:d=>{console.error("Error al actualizar la factura:",d),e.error("Error al actualizar la factura. Revisa los campos.")}})};return r.jsxs(_,{breadcrumbs:E,children:[r.jsx(x,{title:"Editar Factura"}),r.jsx(b,{title:"Editar Factura",description:`Aquí puedes editar la factura #${t.invoice_number}.`,children:r.jsxs(o,{variant:"default",onClick:()=>window.open(route("invoices.pdf",t.id),"_blank"),children:[r.jsx(j,{className:"mr-2 h-4 w-4"}),"Descargar Factura PDF"]})}),r.jsxs("form",{className:"flex flex-col gap-4",onSubmit:p,children:[r.jsx(h,{data:u,patients:s,consultations:n,setData:c,errors:m,isEditing:!0}),r.jsx(o,{variant:"default",type:"submit",disabled:i,children:i?"Actualizando...":"Actualizar Factura"})]})]})}export{O as default};
