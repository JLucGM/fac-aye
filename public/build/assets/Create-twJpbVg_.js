import{m as h,j as e,L as j}from"./app-BaNFacks.js";import{A as g}from"./app-layout-B6y8PlCE.js";import{B as _}from"./button-C2utgpyk.js";import{C as v}from"./content-layout-ewJt28BJ.js";import b from"./ConsultationsForm-v7CryhQc.js";import{H as C}from"./heading-Dryr75PN.js";import{L as c}from"./label-BrcINEJv.js";import{S as y}from"./react-select.esm-DpILO6rb.js";import{I as d}from"./input-error-dAPajrZB.js";import{I as N}from"./input-B6oBgo6B.js";import S from"./ServicesTable-B-MF-gfi.js";/* empty css            */import"./index-xlHgpnQO.js";import"./utils-bRKmu4jq.js";import"./index-j81X5Fg9.js";import"./Combination-DUZVKsHe.js";import"./floating-ui.dom-C5vApqfE.js";import"./createLucideIcon-C5RX-QSg.js";import"./dropdown-menu-MpDP4PIp.js";import"./app-logo-icon-IWmtcpMF.js";import"./chevron-right-BYqJl8-_.js";import"./format-IqVLw5LE.js";import"./table-DuQyU_oQ.js";const I=[{title:"Dashboard",href:"/dashboard"},{title:"Listado de Consultas",href:"/consultations"},{title:"Crear Consulta",href:"#"}];function W({patients:i,users:n,services:r,paymentMethods:s}){console.log(r);const{data:a,setData:o,errors:l,post:p}=h({user_id:n[0].id,patient_id:i[0].id,service_id:[],status:"scheduled",scheduled_at:new Date().toISOString().slice(0,19),consultation_type:"office",notes:"",payment_status:"pending",amount:0,payment_method_id:s.length>0?Number(s[0].id):null,reference:""}),u=t=>{t.preventDefault(),p(route("consultations.store"),{onSuccess:()=>{},onError:x=>{console.error("Error al crear el paciente:",x)}})},m=s.map(t=>({value:t.id,label:t.name})),f=r.filter(t=>a.service_id.includes(t.id));return e.jsxs(g,{breadcrumbs:I,children:[e.jsx(j,{title:"Crear Consulta"}),e.jsxs(v,{children:[e.jsx(C,{title:"Crear consulta",description:"Aquí puedes crear una nueva consulta para un paciente."}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:u,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"col-span-full md:col-span-2",children:[e.jsx("h1",{className:"text-xl",children:"Información de la Consulta"}),e.jsx(b,{data:a,patients:i,users:n,services:r,setData:o,errors:l})]}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-xl",children:"Información de Pago"}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"payment_method_id",className:"my-2 block font-semibold text-gray-700",children:"Método de Pago"}),e.jsx(y,{id:"payment_method_id",options:m,value:m.find(t=>t.value===a.payment_method_id)||null,onChange:t=>o("payment_method_id",t?t.value:null),isSearchable:!0,placeholder:"Selecciona un método de pago...",className:"rounded-md mt-1 block w-full"}),e.jsx(d,{message:l.payment_method_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"reference",className:"my-2 block font-semibold text-gray-700",children:"Referencia  (Opcional)"}),e.jsx(N,{id:"reference",type:"text",name:"reference",value:a.reference,className:"mt-1 block w-full",onChange:t=>o("reference",t.target.value)}),e.jsx(d,{message:l.reference,className:"mt-2"})]})]})]}),e.jsx("h2",{className:"text-xl mt-4",children:"Servicios Seleccionados"}),e.jsx(S,{services:f}),e.jsx(_,{variant:"default",children:"Crear Consulta"})]})]})]})}export{W as default};
