import{m as b,j as i,L as f}from"./app--xgSMu8m.js";import{B as v}from"./button-BGZQJ0Ba.js";import{C as g}from"./content-layout-BOG04L-D.js";import{H as _}from"./heading--swNWzJW.js";import{S as p}from"./react-select.esm-I3F71os0.js";import{L as l}from"./label-BTtlpCFn.js";import{I as u}from"./input-error-D0cdDPbS.js";import"./index-BwWXEq4-.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-CnfBnbLe.js";import"./chevron-right-D_nz7_XC.js";import"./createLucideIcon-DF-M5Tia.js";import"./index-CO6rcehI.js";import"./Combination-LpGtPM2s.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-B3ssbDY0.js";const N=[{title:"Inicio",href:"/dashboard"},{title:"Listado de Pacientes",href:"/patients"},{title:"Renovar funcionales",href:"#"}];function A({patients:t,subscriptions:r}){var d,m;const{data:s,setData:o,errors:c,post:x}=b({subscription_id:"",patient_id:""}),h=e=>{if(e.preventDefault(),!s.patient_id||!s.subscription_id){console.error("Se requiere patient_id y subscription_id para actualizar la suscripción.");return}x(route("patients.subscription.update"),{onSuccess:()=>{console.log("Suscripción actualizada exitosamente")},onError:j=>{console.error("Error al actualizar la suscripción:",j)}})},a=t.find(e=>e.id===s.patient_id),n=r.find(e=>e.id===s.subscription_id);return i.jsxs(g,{breadcrumbs:N,children:[i.jsx(f,{title:"Renovar funcional"}),i.jsx(_,{title:"Renovar funcional",description:"Aquí puedes renovar o crear un nuevo funcional al paciente."}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("form",{className:"col-span-2 flex flex-col gap-4",onSubmit:h,children:[i.jsxs("div",{className:"mt-4",children:[i.jsx(l,{htmlFor:"patient_id",children:"Paciente"}),i.jsx(p,{id:"patient_id",options:[{value:"",label:"Sin paciente"},...t.map(e=>({value:e.id,label:`${e.name} ${e.lastname} ( C.I: ${e.identification} )`}))],value:s.patient_id?{value:s.patient_id,label:((d=t.find(e=>e.id===s.patient_id))==null?void 0:d.name)||""}:{value:"",label:"Sin paciente"},onChange:e=>o("patient_id",(e==null?void 0:e.value)||null),isClearable:!1,className:"mt-1"}),i.jsx(l,{className:"text-gray-500 text-sm",htmlFor:"patient_id",children:"Solo se mostrarán los pacientes sin funcional o renovación de funcional"}),i.jsx(u,{message:c.patient_id,className:"mt-2"})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(l,{htmlFor:"subscription_id",children:"Funcionales"}),i.jsx(p,{id:"subscription_id",options:[{value:"",label:"Sin Funcionales"},...r.map(e=>({value:e.id,label:`${e.name} (${e.type})`}))],value:s.subscription_id?{value:s.subscription_id,label:((m=r.find(e=>e.id===s.subscription_id))==null?void 0:m.name)||""}:{value:"",label:"Sin Funcionales"},onChange:e=>o("subscription_id",(e==null?void 0:e.value)||null),isClearable:!1,className:"mt-1"}),i.jsx(u,{message:c.subscription_id,className:"mt-2"})]}),i.jsx(v,{variant:"default",type:"submit",children:"Renovar"})]}),i.jsxs("div",{className:"mt-4",children:[a?i.jsxs("div",{className:"",children:[i.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Datos del Paciente:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nombre:"})," ",a.name," ",a.lastname]}),i.jsxs("p",{children:[i.jsx("strong",{children:"C.I:"})," ",a.identification]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Teléfono:"})," ",a.phone||"No disponible"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",a.email||"No disponible"]})]})]}):i.jsx("div",{className:"bg-gray-100 p-4 rounded-lg text-center",children:i.jsx("p",{className:"text-gray-500",children:"Seleccione un paciente para ver sus datos"})}),n&&i.jsxs("div",{className:" mt-4",children:[i.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Datos de la Suscripción:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nombre:"})," ",n.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Tipo:"})," ",n.type]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Precio:"})," $",n.price]})]})]})]})]})]})}export{A as default};
