import{m as x,r as s,j as t,L as y}from"./app-xOoa6HPd.js";import{B as j}from"./button-DP5s21Aj.js";import{C as D}from"./content-layout-CkCPDyWQ.js";import v from"./ConsultationsForm-Cjf1B3Ol.js";import{H as A}from"./heading-ByIQHPQg.js";import{C as L}from"./ConfirmConsultationDialog-CryEgxyh.js";import"./index-DuDXMw8I.js";import"./index-dkW4UkYo.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-Digk0PGo.js";import"./createLucideIcon-B07QP_jw.js";import"./index-DzIYgzR8.js";import"./Combination-CX8qYfzW.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-DF6AT74w.js";import"./input-error-B3TWQCeb.js";import"./input-D3BiNtE6.js";import"./label-DJSHCchO.js";import"./react-select.esm-CA10u9P8.js";import"./ServicesTable-DG1o8w2m.js";import"./table-CjD9jXok.js";import"./dialog-BV_kTYFQ.js";const S=[{title:"Inicio",href:"/dashboard"},{title:"Listado de asistencias",href:"/consultations"},{title:"Crear asistencia",href:"#"}];function X({patients:r,users:o,services:n}){const{data:d,setData:m,errors:p,post:u,processing:a}=x({user_id:o[0].id,patient_id:r[0].id,service_id:[],status:"completado",consultation_type:"consultorio",notes:"",payment_status:"pendiente",amount:0,subscription_use:"no"}),[l,f]=s.useState([]),[h,i]=s.useState(!1);s.useEffect(()=>{const e=new Date().toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit"}),b=r.filter(c=>c.birthdate?new Date(c.birthdate).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit"})===e:!1);f(b)},[r]);const C=e=>{e.preventDefault(),i(!0)},g=()=>{u(route("consultations.store"),{onSuccess:()=>{i(!1)},onError:e=>{console.error("Error al crear la Asistencia:",e),i(!1)}})};return t.jsxs(D,{breadcrumbs:S,children:[t.jsx(y,{title:"Crear Asistencia"}),t.jsx(A,{title:"Crear asistencia",description:"Aquí puedes crear una nueva asistencia para un paciente."}),l.length>0&&t.jsxs("div",{className:"mb-4 p-4 border border-yellow-300 bg-yellow-100 rounded",children:[t.jsx("h2",{className:"font-semibold text-lg",children:"¡Feliz Cumpleaños a nuestros pacientes!"}),t.jsx("ul",{children:l.map(e=>t.jsxs("li",{children:[e.name," ",e.lastname," - ",e.birthdate?new Date(e.birthdate).toLocaleDateString("es-CA",{day:"2-digit",month:"2-digit",year:"numeric"}):"Fecha no disponible"]},e.id))})]}),t.jsxs("form",{className:"flex flex-col gap-4",onSubmit:C,children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx(v,{data:d,patients:r,users:o,services:n,setData:m,errors:p})}),t.jsx(j,{variant:"default",type:"submit",disabled:a,children:a?"Creando...":"Crear Asistencia"})]}),t.jsx(L,{open:h,onOpenChange:i,onConfirm:g,title:"Confirmar Creación de Asistencia",description:"Por favor, revisa los datos antes de crear la nueva asistencia.",confirmButtonText:"Confirmar y Crear",processing:a,type:"create",data:d,patients:r,users:o,services:n})]})}export{X as default};
