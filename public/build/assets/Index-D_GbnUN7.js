import{r as o,j as e,L as D,$ as N}from"./app-Bn7lKDdH.js";import{H as L}from"./heading-BgTFNm2q.js";import{b as P,B as p}from"./button-BmWUKnHa.js";import{C as I}from"./content-layout-n2dAw6uV.js";import{D as O}from"./data-table-CxY8dtnk.js";import{columns as _}from"./columns-CWo3uPSo.js";import{p as k,C as F,a as B,b as E,c as T,d as H}from"./collapsible-ClHjUFNh.js";import{L as d}from"./label-C7HJd8qW.js";import{I as y}from"./input-CDtbxU2L.js";import{f as R}from"./format-CNjBDjOL.js";import"./index-DgKgDHIX.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-D1xzlCcl.js";import"./chevron-right-CCOLSYgg.js";import"./createLucideIcon-C9kM3EzZ.js";import"./index-XbIK9ru7.js";import"./Combination-CrfyiIHz.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-DAGSaJ0x.js";import"./table-BCkxKCnB.js";import"./dropdown-menu-C35_87LF.js";import"./index-67D3KxY0.js";import"./index-NWiXZgKt.js";import"./checkbox-DlohZsBX.js";import"./check-s6CV1AsW.js";const U=[{title:"Inicio",href:"/dashboard"},{title:"Lista de Pagos",href:"/payments"}];function pe({payments:i}){const[c,x]=o.useState("all"),[m,h]=o.useState("all"),[t,u]=o.useState(""),[a,f]=o.useState(""),[j,C]=o.useState(!1),S=[...new Set(i.map(s=>{var n;return(n=s.payment_method)==null?void 0:n.name}).filter(Boolean))].sort(),w=[...new Set(i.map(s=>s.status).filter(Boolean))].sort(),g=i.filter(s=>{var v;const n=c==="all"||((v=s.payment_method)==null?void 0:v.name)===c,M=m==="all"||s.status===m;let r=!0;if(t||a){const b=s.created_at?k(s.created_at):null,l=b?R(b,"yyyy-MM-dd"):null;l?t&&a?r=l>=t&&l<=a:t?r=l>=t:a&&(r=l<=a):r=!1}return n&&M&&r});return e.jsxs(I,{breadcrumbs:U,children:[e.jsx(D,{title:"Lista de Pagos"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(L,{title:"Lista de Pagos",description:"Gestión de todos los pagos registrados"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(N,{className:P({variant:"outline"}),href:route("module-operation.accounts_receivable_index"),children:"Ver Cuentas por Pagar"}),e.jsx(p,{asChild:!0,children:e.jsx(N,{href:route("payments.create"),children:"Registrar Pago"})})]})]}),e.jsxs(F,{open:j,onOpenChange:C,className:"w-full space-y-2 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-4 px-4 bg-gray-100 p-3 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Filtros de Pagos"}),e.jsx(B,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",children:j?e.jsxs(e.Fragment,{children:["Ocultar filtros",e.jsx(E,{className:"h-4 w-4 mr-2"})]}):e.jsxs(e.Fragment,{children:["Mostrar filtros",e.jsx(T,{className:"h-4 w-4 mr-2"})]})})})]}),e.jsx(H,{className:"space-y-2",children:e.jsxs("div",{className:"rounded-md border px-4 py-3 text-sm space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{className:"block text-sm font-medium mb-1",children:"Método de pago"}),e.jsxs("select",{value:c,onChange:s=>x(s.target.value),className:"w-full border rounded p-2",children:[e.jsx("option",{value:"all",children:"Todos los métodos"}),S.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(d,{className:"block text-sm font-medium mb-1",children:"Estado"}),e.jsxs("select",{value:m,onChange:s=>h(s.target.value),className:"w-full border rounded p-2",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),w.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(d,{className:"block text-xs text-gray-500 mb-1",children:"Desde"}),e.jsx(y,{type:"date",value:t,onChange:s=>u(s.target.value),className:"w-full border rounded p-2",max:a||void 0})]}),e.jsxs("div",{children:[e.jsx(d,{className:"block text-xs text-gray-500 mb-1",children:"Hasta"}),e.jsx(y,{type:"date",value:a,onChange:s=>f(s.target.value),min:t||void 0,className:"w-full border rounded p-2"})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{variant:"outline",onClick:()=>{x("all"),h("all"),u(""),f("")},children:"Limpiar filtros"})})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Mostrando ",g.length," de ",i.length," pagos"]}),e.jsx(O,{columns:_,data:g})]})]})}export{pe as default};
