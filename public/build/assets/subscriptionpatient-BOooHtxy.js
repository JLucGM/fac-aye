import{m as h,j as i,L as j}from"./app-DeSi3B8X.js";import{B as v}from"./button-BCqh8rSk.js";import{C as _}from"./content-layout-COrTniHz.js";import{H as N}from"./heading-BfAZevr9.js";import{S as p}from"./react-select.esm-CqXc5-5x.js";import{L as r}from"./label-CoSwX2YG.js";import{I as u}from"./input-error-C56c8ftT.js";import{P as g,M as S}from"./patients-info-BFfe_RNe.js";import"./index-BUm72mbL.js";import"./utils-bRKmu4jq.js";import"./app-logo-icon-DHZsRJc9.js";import"./createLucideIcon-C1XQfYwF.js";import"./index-IaZtNpIk.js";import"./Combination-BzU1HETp.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-BRDH0ZmT.js";const y=[{title:"Inicio",href:"/dashboard"},{title:"Listado de Pacientes",href:"/patients"},{title:"Renovar funcionales",href:"#"}];function T({patients:n,subscriptions:t}){var d,m;const{data:a,setData:l,errors:o,post:x}=h({subscription_id:"",patient_id:""}),f=e=>{if(e.preventDefault(),!a.patient_id||!a.subscription_id){console.error("Se requiere patient_id y subscription_id para actualizar la suscripción.");return}x(route("patients.subscription.update"),{onSuccess:()=>{},onError:b=>{console.error("Error al actualizar la suscripción:",b)}})},c=n.find(e=>e.id===Number(a.patient_id)),s=t.find(e=>e.id===Number(a.subscription_id));return i.jsxs(_,{breadcrumbs:y,children:[i.jsx(j,{title:"Renovar funcional"}),i.jsx(N,{title:"Renovar funcional",description:"Aquí puedes renovar o crear un nuevo funcional al paciente."}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("form",{className:"col-span-2 flex flex-col gap-4",onSubmit:f,children:[i.jsxs("div",{className:"mt-4",children:[i.jsx(r,{htmlFor:"patient_id",children:"Paciente"}),i.jsx(p,{id:"patient_id",options:[{value:"",label:"Sin paciente"},...n.map(e=>({value:e.id,label:`${e.name} ${e.lastname} ( C.I: ${e.identification} )`}))],value:a.patient_id?{value:a.patient_id,label:((d=n.find(e=>e.id===a.patient_id))==null?void 0:d.name)||""}:{value:"",label:"Sin paciente"},onChange:e=>l("patient_id",(e==null?void 0:e.value)||null),isClearable:!1,className:"mt-1"}),i.jsx(r,{className:"text-gray-500 text-sm",htmlFor:"patient_id",children:"Solo se mostrarán los pacientes sin funcional o renovación de funcional"}),i.jsx(u,{message:o.patient_id,className:"mt-2"})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(r,{htmlFor:"subscription_id",children:"Funcionales"}),i.jsx(p,{id:"subscription_id",options:[{value:"",label:"Sin Funcionales"},...t.map(e=>({value:e.id,label:`${e.name} (${e.type})`}))],value:a.subscription_id?{value:a.subscription_id,label:((m=t.find(e=>e.id===a.subscription_id))==null?void 0:m.name)||""}:{value:"",label:"Sin Funcionales"},onChange:e=>l("subscription_id",(e==null?void 0:e.value)||null),isClearable:!1,className:"mt-1"}),i.jsx(u,{message:o.subscription_id,className:"mt-2"})]}),i.jsx(v,{variant:"default",type:"submit",children:"Renovar"})]}),i.jsxs("div",{className:"mt-4",children:[c?i.jsx("div",{className:"",children:i.jsx(g,{patient:c})}):i.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg text-center",children:[i.jsx(S,{className:"mx-auto mb-2 text-gray-600",size:48}),i.jsx("p",{className:"text-gray-500",children:"Seleccione un paciente para ver sus datos"})]}),s&&i.jsxs("div",{className:" mt-4",children:[i.jsx("h3",{className:"text-base font-medium mb-0.5",children:"Datos de la Suscripción"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nombre:"})," ",s.name]}),i.jsxs("p",{className:"capitalize",children:[i.jsx("strong",{children:"Tipo:"})," ",s.type]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Precio:"})," ",s.price]})]})]})]})]})]})}export{T as default};
