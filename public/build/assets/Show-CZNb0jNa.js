import{r as d,j as e,L as w,$ as T}from"./app-efENkHWt.js";import{D as P}from"./data-table-B34tOonz.js";import{H as L}from"./heading-ClyJDkQj.js";import{B as x}from"./button-D68pe1qA.js";import{C as M}from"./content-layout-BeoFrXX3.js";import{L as p}from"./label-BWZsqXZl.js";import{I as y}from"./input-BmTjbIX6.js";import{p as E,C as I,a as O,b as _,c as $,d as H}from"./collapsible-B4mvX-pR.js";import{consultationColumns as z}from"./consultationColumns-CHTBcOI-.js";import{S as A}from"./square-pen-Bzmml49V.js";import{f as B}from"./format-DE3CduTx.js";import"./table-BHnuCnsP.js";import"./utils-bRKmu4jq.js";import"./createLucideIcon-B5WZNrw5.js";import"./index-DhVMpW3F.js";import"./index-dkW4UkYo.js";import"./app-logo-icon-CD1UPjYs.js";import"./index-pYX6Rk_K.js";import"./Combination-zcTCfqt7.js";import"./floating-ui.dom-C5vApqfE.js";import"./chevron-down-CX-E3_9q.js";import"./dropdown-menu-wHi2-1jB.js";import"./index-CwwmHJCr.js";import"./index-BCoOSl2_.js";const V=[{title:"Inicio",href:"/dashboard"},{title:"Listado de Pacientes",href:"/patients"},{title:"Ver",href:"#"}],Y=s=>{if(!s)return"Fecha no disponible";const a=new Date(s),n=new Date;let i=n.getFullYear()-a.getFullYear();const o=n.getMonth()-a.getMonth();return(o<0||o===0&&n.getDate()<a.getDate())&&i--,i},k=s=>s.filter(a=>a.payment_status==="pendiente").reduce((a,n)=>a+(typeof n.amount=="string"?parseFloat(n.amount):n.amount),0);function xe({patient:s}){const[a,n]=d.useState("all"),[i,o]=d.useState("all"),[l,u]=d.useState(""),[r,j]=d.useState(""),[f,C]=d.useState(!1),g=s.consultations||[],c=g.filter(t=>{const N=a==="all"||t.payment_status===a,F=i==="all"||t.consultation_type===i;let m=!0;if(l||r){const S=E(t.scheduled_at),h=B(S,"yyyy-MM-dd");l&&r?m=h>=l&&h<=r:l?m=h>=l:r&&(m=h<=r)}return N&&F&&m}),v=c.length,b=c.filter(t=>t.payment_status==="pagado").length,D=c.filter(t=>t.payment_status==="pendiente").length;return e.jsxs(M,{breadcrumbs:V,children:[e.jsx(w,{title:"Ver Paciente"}),e.jsx(L,{title:`${s.name} ${s.lastname}`,description:"Detalles del paciente",children:e.jsx(x,{asChild:!0,children:e.jsxs(T,{className:"btn btn-primary",href:route("patients.edit",[s]),children:[e.jsx(A,{}),"Actualizar paciente"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{children:"Información del Paciente"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",s.name," ",s.lastname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Identificación:"})," ",s.identification]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",s.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha de Nacimiento:"})," ",s.birthdate?new Date(s.birthdate).toLocaleDateString("es-ES"):"Fecha no disponible"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edad:"})," ",Y(s.birthdate)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dirección:"})," ",s.address||"No disponible"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total de Consultas:"})," ",v]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Consultas Pagadas:"})," ",b]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Consultas Pendientes:"})," ",D]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total de Deuda:"})," $",k(g).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros de Consultas"}),e.jsxs(I,{open:f,onOpenChange:C,className:"w-full space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-4 px-4 bg-gray-100 p-3 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Filtros de Consulta"}),e.jsx(O,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",children:f?e.jsxs(e.Fragment,{children:["Ocultar filtros",e.jsx(_,{className:"h-4 w-4 mr-2"})]}):e.jsxs(e.Fragment,{children:["Mostrar filtros",e.jsx($,{className:"h-4 w-4 mr-2"})]})})})]}),e.jsx(H,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"paymentStatus",className:"whitespace-nowrap",children:"Estado de pago:"}),e.jsxs("select",{id:"paymentStatus",value:a,onChange:t=>n(t.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"paid",children:"Pagadas"}),e.jsx("option",{value:"pending",children:"Pendientes"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"consultationType",className:"whitespace-nowrap",children:"Tipo de consulta:"}),e.jsxs("select",{id:"consultationType",value:i,onChange:t=>o(t.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"domiciliary",children:"Domicilio"}),e.jsx("option",{value:"office",children:"Oficina"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"startDate",children:"Desde:"}),e.jsx(y,{id:"startDate",type:"date",value:l,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{htmlFor:"endDate",children:"Hasta:"}),e.jsx(y,{id:"endDate",type:"date",value:r,onChange:t=>j(t.target.value),min:l})]}),e.jsx(x,{onClick:()=>{n("all"),o("all"),u(""),j("")},variant:"outline",children:"Limpiar filtros"})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Consultas (",c.length,")"]}),e.jsx(P,{columns:z,data:c})]})]})]})}export{xe as default};
